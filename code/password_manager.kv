#:import Factory kivy.factory.Factory

ScreenManager:
    MenuScreen:
    StorePasswordScreen:
    RecoverPasswordScreen:
    ListCredentialsScreen:
    DeletePasswordScreen:

<MenuScreen>:
    name: "menu"

    BoxLayout:
        orientation: "vertical"
        spacing: 10
        padding: 20

        Label:
            text: "Gestor de Contraseñas"
            font_size: "24sp"
            bold: True
            halign: "center"

        Button:
            text: "Guardar/Actualizar Contraseña"
            on_release: app.root.current = "store_password"

        Button:
            text: "Recuperar Contraseña"
            on_release: app.root.current = "recover_password"

        Button:
            text: "Listar Credenciales"
            on_release: app.root.current = "list_credentials"

        Button:
            text: "Eliminar Contraseña"
            on_release: app.root.current = "delete_password"

        Button:
            text: "Salir"
            on_release: app.stop()

<StorePasswordScreen>:
    name: "store_password"

    BoxLayout:
        orientation: "vertical"
        padding: 20
        spacing: 10

        Label:
            text: "Guardar/Actualizar Contraseña"
            font_size: "20sp"

        TextInput:
            id: username
            hint_text: "Usuario"

        TextInput:
            id: site
            hint_text: "Sitio Web"

        TextInput:
            id: password
            hint_text: "Contraseña"
            password: True

        Button:
            text: "Guardar"
            on_release: app.store_password(username.text, site.text, password.text)

        Button:
            text: "Volver al menú"
            on_release: app.root.current = "menu"

<RecoverPasswordScreen>:
    name: "recover_password"

    BoxLayout:
        orientation: "vertical"
        padding: 20
        spacing: 10

        Label:
            text: "Recuperar Contraseña"
            font_size: "20sp"

        TextInput:
            id: username
            hint_text: "Usuario"

        TextInput:
            id: site
            hint_text: "Sitio Web"

        TextInput:
            id: admin_password
            hint_text: "Contraseña Admin"
            password: True

        Button:
            text: "Recuperar"
            on_release: app.recover_password(username.text, site.text, admin_password.text)

        Button:
            text: "Volver al menú"
            on_release: app.root.current = "menu"

<ListCredentialsScreen>:
    name: "list_credentials"

    BoxLayout:
        orientation: "vertical"
        padding: 20
        spacing: 10

        Label:
            text: "Listar Credenciales"
            font_size: "20sp"

        TextInput:
            id: admin_password
            hint_text: "Contraseña Admin"
            password: True

        Button:
            text: "Mostrar Credenciales"
            on_release: app.list_credentials(admin_password.text)

        ScrollView:
            Label:
                id: credentials_list
                text: "Aquí se mostrarán las credenciales"
                size_hint_y: None
                height: self.texture_size[1]

        Button:
            text: "Volver al menú"
            on_release: app.root.current = "menu"

<DeletePasswordScreen>:
    name: "delete_password"

    BoxLayout:
        orientation: "vertical"
        padding: 20
        spacing: 10

        Label:
            text: "Eliminar Contraseña"
            font_size: "20sp"

        TextInput:
            id: username
            hint_text: "Usuario"

        TextInput:
            id: site
            hint_text: "Sitio Web"

        TextInput:
            id: admin_password
            hint_text: "Contraseña Admin"
            password: True

        Button:
            text: "Eliminar"
            on_release: app.delete_password(username.text, site.text, admin_password.text)

        Button:
            text: "Volver al menú"
            on_release: app.root.current = "menu"
